var RBXFileHandler=function(t){"use strict";function e(s){if(s&&s.__esModule)return s;var r=Object.create(null);return s&&Object.keys(s).forEach(function(t){var e;"default"!==t&&(e=Object.getOwnPropertyDescriptor(s,t),Object.defineProperty(r,t,e.get?e:{enumerable:!0,get:function(){return s[t]}}))}),r.default=s,Object.freeze(r)}var s=e(xml2js);class r{constructor(){this.Archivable=!0,this.ClassName="Instance",this.Name="",this.Parent=null,this.RobloxLocked=!1,this.Children=[],this._isDistroyed=!1,this.referentId=""}set _isDistroyed(t){!0===t&&this.Distroy()}ClearAllChildren(){null==Children[0]||this._isDistroyed||this.Children.forEach(t=>{Distroy()})}Clone(){if(!this._isDistroyed||this.Archivable){let e=Object.assign({},this);return e.Children=[],this.Children.forEach(t=>{this.Archivable&&e.Children.push(t)}),e}}Distroy(){if(!this._isDistroyed){if(this.Parent){const t=this.Parent.Children.indexOf(this);t=t.splice(x,1),this.Parent=null}this.Archivable=!1,this._isDistroyed=!0,this.ClearAllChildren(),Children=[]}}GetChildren=()=>{this._isDistroyed||this.Children||this.Children};GetDescendants(){if(!this._isDistroyed){let t=this.GetChildren(),e=[...t];return t.forEach(t=>{e.concat(t.GetDescendants())}),e}}IsA=t=>!_isDistroyed&&this instanceof RoModules.Classes[t];IsAncestorOf(t){if(!_isDistroyed){t=t.Parent;return!!t&&(t===this||this.IsAncestorOf(t))}}IsDescendantOf=t=>!_isDistroyed&&t.IsAncestorOf(this)}class i extends r{constructor(){super()}}class n extends i{constructor(){super(),this.Anchored=!1,this.AssemblyAngularVelocity,this.AssemblyCenterOfMass,this.AssemblyLinearVelocity,this.AssemblyMass,this.AssemblyRootPart,this.BackSurface,this.BottomSurface,this.BrickColor,this.CFrame,this.CanCollide,this.CanQuery,this.CanTouch,this.CastShadow,this.CenterOfMass,this.CollisionGroupId,this.Color,this.CustomPhysicalProperties,this.FrontSurface,this.LeftSurface,this.LocalTransparencyModifier,this.Locked,this.Mass,this.Massless,this.Material,this.Orientation,this.PivotOffset,this.Position,this.ReceiveAge,this.Reflectance,this.ResizeIncrement,this.ResizeableFaces,this.RightSurface,this.RootPriority,this.Rotation,this.Size,this.TopSurface,this.Transparency}}class a extends n{constructor(){super()}}class o extends r{constructor(){this.AutoSelectGuiEnabled,this.CoreGuiNavigationEnabled,this.GuiNavigationEnabled,this.MenuIsOpen,this.SelectedObject}}class h extends i{constructor(){super(),this.ClassName="Model",this.WorldPivot,this.PrimaryPart,this.LevelOfDetail}}class l extends a{constructor(){super(),this.ClassName="Part",this.Shape}}class c extends n{constructor(){this.Decoration,this.MaterialColors,this.MaxExtents,this.WaterColor,this.WaterReflectance,this.WaterTransparency,this.WaterWaveSize,this.WaterWaveSpeed}}class u extends h{constructor(){super(),this.ClassName="Workspace",this.AllowThirdPartySales=!1,this.AnimationWeightedBlendFix,this.ClientAnimatorThrottling,this.CurrentCamera,this.DistributedGameTime,this.FallenPartsDestroyHeight,this.Gravity,this.HumanoidOnlySetCollisionsOnStateChange,this.InterpolationThrottling,this.MeshPartHeadsAndAccessories,this.PhysicsSimulationRate,this.PhysicsSteppingMethod,this.SignalBehavior,this.StreamingEnabled,this.StreamingMinRadius,this.StreamingPauseMode,this.StreamingTargetRadius,this.Terrain,this.TouchesUseCollisionGroups}}class d{constructor(...t){this.values=t}lerp(e,t,...s){let r=[];t instanceof d?s=t.values:s.push(t);for(let t=0;t<Math.max(this.values.length,s.length);t++){var i=this.values[t]||0,n=s[t]||0;r[t]=(1-e)*i+e*n}return new d(...r)}}class f extends d{constructor(t=0,e=0,s=0){super(t,e,s),this.X=this.values[0],this.Y=this.values[1],this.Z=this.values[2]}}class m{constructor(t=0,e=0,s=0,r=0,i=0,n=0,a=0,o=0,h=0,l=0,c=0,u=0){this.x=t,this.y=e,this.z=s,this.R00=r,this.R01=i,this.R02=n,this.R10=a,this.R11=o,this.R12=h,this.R20=l,this.R21=c,this.R22=u,t instanceof f&&this._setXYZFromVector3(t)}_setXYZFromVector3(t,e){this.x=t.x,this.y=t.y,this.z=t.z}get Position(){return new f(this.x,this.y,this.z)}set Position(t){t instanceof f?this._setXYZFromVector3(t):t instanceof Array&&(this.x=t[0],this.x=t[1],this.x=t[2])}}class C extends d{constructor(t,e,s){super(t,e,s),this.R=t,this.G=e,this.B=s}}class p extends d{constructor(t,e,s,r=255){if(super(r,t,e,s),"number"==typeof t)if("number"==typeof e)this.values=[r,t,e,s];else{s=function(t){var e=new ArrayBuffer(4);const s=new DataView(e);return s.setUint32(0,t,!1),e}(t);let e=new DataView(s);for(let t=0;t<e.byteLength;t++)this.values[t]=e.getUint8(t)}else t instanceof C&&(this.values=[r,...t.values]);this.A=this.values[0],this.alpha=this.values[0],this.R=this.values[1],this.G=this.values[2],this.B=this.values[3],this.Color3=new C(this.R,this.G,this.B)}getRGBComponents=()=>[this.R,this.G,this.B]}var y={NoInput:0,Constant:12,Sin:13};Object.freeze(y);var b={Plastic:256,Wood:512,Slate:800,Concrete:816,CorrodedMetal:1040,DiamondPlate:1056,Foil:1072,Grass:1280,Ice:1536,Marble:784,Granite:832,Brick:848,Pebble:864,Sand:1296,Fabric:1312,SmoothPlastic:272,Metal:1088,WoodPlanks:528,Cobblestone:880,Air:1792,Water:2048,Rock:896,Glacier:1552,Snow:1328,Sandstone:912,Mud:1344,Basalt:788,Ground:1360,CrackedLava:804,Neon:288,Glass:1568,Asphalt:1376,LeafyGrass:1284,Salt:1392,Limestone:820,Pavement:836,ForceField:1584};Object.freeze(b);var v={Ball:0,Block:1,Cylinder:2};Object.freeze(v);var P={Smooth:0,Glue:1,Weld:2,Studs:3,Inlet:4,Universal:5,Hinge:6,Motor:7,SteppingMotor:8,SmoothNoOutlines:10};Object.freeze(P);class R extends Error{constructor(t,e){super(t),this.name=this.constructor.name,this.originalError=e,this.errorParsed=!0,Error.captureStackTrace(this,this.constructor)}}function S(t){if(null!=t)return t.errorParsed?t:"ENOENT"===t.code?new R(`Cound not find file '${t.path}'`,t):void 0}const I={BasePart:n,FormFactorPart:a,GuiService:o,Instance:r,Model:h,Part:l,PVInstance:i,Terrain:c,Workspace:u},g={BaseVector:d,CFrame:m,Color3:C,Color3uint8:p,Vector3:f};var T={InputType:y,Material:b,PartType:v,SurfaceType:P},A={...I,...g,...T};const O=new s.Parser;let M={};function N(t){if("object"==typeof t){for(const e in t)return!0;return!1}O.parseString(t,(t,e)=>N(e))}const D=t=>N(t)&&t.$.referent||!t.isParsed;function G(t){if(t){if("string"==typeof t)return M[t];if(t instanceof I.Instance)return t;if(D(t))return E(t)}return null}function F(e,s,r=M){var i,n=e._;switch(e.$.name,s.toLowerCase()){case"string":return n;case"coordinateframe":return new g.CFrame(Number(e.X),Number(e.Y),Number(e.Z),Number(e.R00),Number(e.R01),Number(e.R02),Number(e.R10),Number(e.R11),Number(e.R12),Number(e.R20),Number(e.R21),Number(e.R22));case"ref":return r[n];case"color3uint8":return new g.Color3uint8(Number(n));default:let t;try{t=new g[s]}catch(t){return t}for(const a in t)e[a]&&(i=e[a],t[a]=JSON.parse(i));return t}}function E(e,t,s){if(e.isParsed)return e;s={REFIDTOINSTANCE:{},...s};const r=e.Item;var i=e.Properties[0],n=e.$.referent,a=e.$.class;t=G(t);let o=[],h=null;try{h=new I[a]}catch(t){return e.isParsed=!1,e}h.isParsed=!0,h.Parent=t,null!=n&&(h.referentId=n,s.REFIDTOINSTANCE[n]=h),r&&r.forEach((t,e)=>{o[e]=E(t,h)}),h.Children=o;for(const l in i){const c=i[l];c.forEach(t=>F(t,l))}return h}function w(s,r){(void 0)(s,(t,e)=>{t?r(S(t),null,s):O.parseString(e,(t,e)=>{r(S(t),e,s)})})}return t.BasePart=n,t.BaseVector=d,t.CFrame=m,t.Color3=C,t.Color3uint8=p,t.FormFactorPart=a,t.GuiService=o,t.InputType=y,t.Instance=r,t.Material=b,t.Model=h,t.PVInstance=i,t.Part=l,t.PartType=v,t.RoClasses=I,t.RoEnums=T,t.RoModules=A,t.RoTypes=g,t.SurfaceType=P,t.Terrain=c,t.Vector3=f,t.Workspace=u,t._convertPropertyToType=F,t.convertItemToInstance=E,t.convertValidInstance=G,t.fileToObject=w,t.findFirstItemByClassName=function e(s,r,t){for(var i in r=r.toLocaleLowerCase(),s){let t=s[i];if(itemClass=t.$.class.toLocaleLowerCase(),itemClass==r)return t;if(t.Item)return e(t.Item,r)}return null},t.isItem=D,t.isXMLTag=N,t.objToInst=function(t){if(Array.isArray(t)){let e=[];return t.forEach(t=>{e.push(objectToInsts(t))}),e}return t.Item?E(t.Item):D(t)?E(t):void 0},t.parseFile=function(t,i){w(t,(t,s)=>{if(t)i(S(t));else if(s.roblox){s=s.roblox;let e=[];const r=s.Item;r.forEach(t=>{e.push(E(t))}),i(t,e)}})},t.xmlToObject=function(t,s){O.parseString(t,(t,e)=>{s(t,e,path)})},Object.defineProperty(t,"__esModule",{value:!0}),t}({});
